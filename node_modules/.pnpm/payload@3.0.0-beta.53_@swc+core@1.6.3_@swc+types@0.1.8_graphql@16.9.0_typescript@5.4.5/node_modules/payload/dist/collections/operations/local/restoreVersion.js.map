{"version":3,"sources":["../../../../src/collections/operations/local/restoreVersion.ts"],"sourcesContent":["import type { GeneratedTypes, Payload } from '../../../index.js'\nimport type { Document, PayloadRequestWithData, RequestContext } from '../../../types/index.js'\n\nimport { APIError } from '../../../errors/index.js'\nimport { createLocalReq } from '../../../utilities/createLocalReq.js'\nimport { restoreVersionOperation } from '../restoreVersion.js'\n\nexport type Options<T extends keyof GeneratedTypes['collections']> = {\n  collection: T\n  /**\n   * context, which will then be passed to req.context, which can be read by hooks\n   */\n  context?: RequestContext\n  depth?: number\n  draft?: boolean\n  fallbackLocale?: GeneratedTypes['locale']\n  id: string\n  locale?: GeneratedTypes['locale']\n  overrideAccess?: boolean\n  req?: PayloadRequestWithData\n  showHiddenFields?: boolean\n  user?: Document\n}\n\nexport default async function restoreVersionLocal<T extends keyof GeneratedTypes['collections']>(\n  payload: Payload,\n  options: Options<T>,\n): Promise<GeneratedTypes['collections'][T]> {\n  const { id, collection: collectionSlug, depth, overrideAccess = true, showHiddenFields } = options\n\n  const collection = payload.collections[collectionSlug]\n\n  if (!collection) {\n    throw new APIError(\n      `The collection with slug ${String(\n        collectionSlug,\n      )} can't be found. Restore Version Operation.`,\n    )\n  }\n\n  const args = {\n    id,\n    collection,\n    depth,\n    overrideAccess,\n    payload,\n    req: await createLocalReq(options, payload),\n    showHiddenFields,\n  }\n\n  return restoreVersionOperation(args)\n}\n"],"names":["APIError","createLocalReq","restoreVersionOperation","restoreVersionLocal","payload","options","id","collection","collectionSlug","depth","overrideAccess","showHiddenFields","collections","String","args","req"],"rangeMappings":";;;;;;;;;;;;;;;;;;;","mappings":"AAGA,SAASA,QAAQ,QAAQ,2BAA0B;AACnD,SAASC,cAAc,QAAQ,uCAAsC;AACrE,SAASC,uBAAuB,QAAQ,uBAAsB;AAmB9D,eAAe,eAAeC,oBAC5BC,OAAgB,EAChBC,OAAmB;IAEnB,MAAM,EAAEC,EAAE,EAAEC,YAAYC,cAAc,EAAEC,KAAK,EAAEC,iBAAiB,IAAI,EAAEC,gBAAgB,EAAE,GAAGN;IAE3F,MAAME,aAAaH,QAAQQ,WAAW,CAACJ,eAAe;IAEtD,IAAI,CAACD,YAAY;QACf,MAAM,IAAIP,SACR,CAAC,yBAAyB,EAAEa,OAC1BL,gBACA,2CAA2C,CAAC;IAElD;IAEA,MAAMM,OAAO;QACXR;QACAC;QACAE;QACAC;QACAN;QACAW,KAAK,MAAMd,eAAeI,SAASD;QACnCO;IACF;IAEA,OAAOT,wBAAwBY;AACjC"}